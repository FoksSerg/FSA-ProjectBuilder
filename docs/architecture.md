# Архитектура FSA-ProjectBuilder

## Общая архитектура

FSA-ProjectBuilder построен на модульной архитектуре, которая позволяет легко расширять функциональность.

## Основные компоненты

### Core (Ядро системы)
- **parser.py** - Парсинг Python кода с помощью AST ✅
  - Извлечение классов, функций, импортов, констант
  - Анализ структуры кода
- **rebuilder.py** - Разборка файла на модули ✅
  - Автоматическая категоризация компонентов
  - Генерация __init__.py файлов
  - Сохранение метаданных
- **builder.py** - Сборка модулей в один файл ✅
  - Определение порядка загрузки модулей
  - Объединение импортов
  - Применение настроек очистки
- **dependency_resolver.py** - Разрешение зависимостей ✅
  - Анализ зависимостей классов и функций
  - Определение порядка загрузки
  - Обнаружение циклических зависимостей
- **validator.py** - Валидация кода (планируется)
- **comparator.py** - Сравнение файлов (планируется)

### GUI (Графический интерфейс)
- **main_window.py** - Главное окно приложения ✅
  - Выбор проекта и файлов
  - Визуализация структуры проекта
  - Предпросмотр разборки и сборки
  - Логирование операций в файл
  - Статусная строка и информационные панели
- **tree_view.py** - Дерево проекта (планируется)
- **graph_view.py** - Граф зависимостей (планируется)
- **diff_view.py** - Сравнение файлов (планируется)
- **process_view.py** - Окно процесса (планируется)
- **settings_dialog.py** - Настройки (планируется)

### Distributors (Создание дистрибутивов)
- **base.py** - Базовый класс дистрибутора ✅
  - Абстрактный интерфейс для дистрибуторов
  - Выполнение команд сборки
- **pyinstaller_dist.py** - PyInstaller интеграция ✅
  - Поддержка основных опций PyInstaller
  - Создание onefile и windowed приложений
- **cxfreeze_dist.py** - cx_Freeze интеграция ✅
  - Поддержка основных опций cx_Freeze
  - Настройка целевой директории
- **nuitka_dist.py** - Nuitka интеграция ✅
  - Поддержка основных опций Nuitka
  - Standalone и onefile режимы

### Utils (Утилиты)
- **ast_utils.py** - Утилиты для работы с AST (планируется)
- **file_utils.py** - Работа с файлами (планируется)
- **config_utils.py** - Работа с конфигурацией (планируется)
- **code_formatter.py** - Форматирование кода (планируется)
- **code_cleaner.py** - Очистка кода (частично реализовано в builder.py)

## Поток данных

### Разборка (Rebuild)
1. Чтение исходного файла
2. Парсинг AST
3. Определение структуры
4. Создание модулей
5. Генерация __init__.py
6. Сохранение метаданных

### Сборка (Build)
1. Чтение метаданных
2. Загрузка модулей
3. Разрешение зависимостей
4. Объединение кода
5. Применение настроек
6. Создание файла
7. Валидация

### Создание дистрибутива (Dist)
1. Сборка проекта
2. Определение зависимостей
3. Выбор инструмента
4. Создание дистрибутива
5. Валидация результата

